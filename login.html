<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>SISAR — Login</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link href="assets/css/style.css" rel="stylesheet">
</head>
<body class="login-bg d-flex align-items-center">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-sm-10 col-md-7 col-lg-5">
        <div class="card card-soft p-3 p-md-4">
          <div class="text-center">
            <i class="fa-solid fa-location-dot text-primary" style="font-size:2rem"></i>
            <h3 class="mt-2 mb-0">SISAR</h3>
            <div class="text-muted">Sistema de Información de Salud para Áreas Rurales</div>
          </div>
          <div class="mt-3">
            <label class="form-label">Correo</label>
            <input id="email" class="form-control" value="admin@sisar.cl">
          </div>
          <div class="mt-2">
            <label class="form-label">Contraseña</label>
            <input id="password" type="password" class="form-control" value="1234">
          </div>
          <button id="btnLogin" class="btn btn-primary w-100 mt-3">
            <i class="fa-solid fa-right-to-bracket me-1"></i> Ingresar
          </button>
          <div class="form-text text-center mt-2">Sistema de Información de Salud para Áreas Rurales</div>
          <div class="form-text text-center mt-1">
            Usuarios Prototipo:<br>
            admin@sisar.cl / coord@sisar.cl / clinico@sisar.cl / analista@sisar.cl / conductor@sisar.cl<br>
            Clave: <b>1234</b>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- auth -->
  <script src="assets/js/auth.js"></script>
  <script>
    function doLogin(){
      const email = document.getElementById('email').value.trim();
      const pass  = document.getElementById('password').value.trim();
      const res = login(email, pass);
      if(!res.ok){ alert(res.msg); return; }
      location.href = 'dashboard.html';
    }

    document.getElementById('btnLogin').addEventListener('click', doLogin);
    document.getElementById('email').addEventListener('keydown', e=>{ if(e.key==='Enter') doLogin(); });
    document.getElementById('password').addEventListener('keydown', e=>{ if(e.key==='Enter') doLogin(); });
  </script>
</body>
</html>
